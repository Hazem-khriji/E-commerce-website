{% extends 'base.html.twig' %}

{% set current_page = 'shop' %}

{% block body %}
	<!-- Start Hero Section -->
	<div class="hero">
		<div class="container">
			<div class="row justify-content-between">
				<div class="col-lg-5">
					<div class="intro-excerpt">
						<h1>Shop</h1>
						<p class="mb-4">Discover elegant and affordable furniture to transform your home into a cozy haven.</p>
						<p>
							<a href="{{ path('app_shop') }}" class="btn btn-secondary me-2">Shop Now</a>
							<a href="{{ path('app_shop') }}" class="btn btn-white-outline">Explore</a>
						</p>
					</div>
				</div>
				<div class="col-lg-7">
					<div class="hero-img-wrap">
						<img src="{{ asset('images/couch.png') }}" class="img-fluid">
					</div>
				</div>
			</div>
		</div>
	</div>
	<!-- End Hero Section -->

	<div class="untree_co-section product-section before-footer-section">
		<div class="container">
			<div class="row">
				<form method="get" class="mb-4 p-3 bg-light rounded shadow-sm">
					<div class="row mb-3">
						<div class="col-12">
							<label for="search" class="form-label">Search</label>
							<input type="text" id="search" name="search" value="{{ filters.search }}" class="form-control" placeholder="Nom du produit...">
						</div>
					</div>

					<div class="row align-items-end">
						<div class="col-md-4 mb-2">
							<label for="category" class="form-label">Category</label>
							<select name="category" id="category" class="form-select">
								<option value="">-- All categories --</option>
								{% for cat in categories %}
									<option value="{{ cat }}" {% if filters.category == cat %}selected{% endif %}>{{ cat }}</option>
								{% endfor %}
							</select>
						</div>

						<div class="col-md-3 mb-2">
							<label for="min_price" class="form-label">Price min</label>
							<input type="number" id="min_price" name="min_price" value="{{ filters.min_price }}" class="form-control" placeholder="0">
						</div>

						<div class="col-md-3 mb-2">
							<label for="max_price" class="form-label">Price max</label>
							<input type="number" id="max_price" name="max_price" value="{{ filters.max_price }}" class="form-control" placeholder="1000">
						</div>

						<div class="col-md-2 mb-2 d-grid">
							<button type="submit" class="btn btn-primary">Search</button>
						</div>
					</div>
				</form>




				{% if products| length > 0 %}
					{% for product in products %}
						<div class="col-12 col-md-4 col-lg-3 mb-5">
							<a class="product-item" href="{{ path('app_product', {'id': product.id}) }}">
								<img src="{{ asset('images/' ~ product.getimageUrl()) }}" class="img-fluid product-thumbnail">
								<h3 class="product-title">{{ product.name }}</h3>
								<strong class="product-price">$ {{ product.price }}</strong>
								<span class="icon-cross">
									<img src="{{ asset('images/cross.svg') }}" class="img-fluid">
								</span>
							</a>
						</div>
					{% endfor %}
				{% else %}
					<p>No products available.</p>
				{% endif %}
			</div>
		</div>
		{% if isPaginated %}
			<div class="row mt-2">
				<nav aria-label="col Page navigation example">
					<ul class="pagination justify-content-center ">
						{% if page!=1 %}
							<li class="page-item"><a class="page-link" href="{{ path("app_shop",{'page':page-1,'nbre':nbre}) }}">Previous</a></li>
						{% else %}
							<li class="page-item"><a class="page-link" href="{{ path("app_shop",{'page':page,'nbre':nbre}) }}">Previous</a></li>
						{% endif %}
						{% for i in range(1,nbPages) %}
							<li class="page-item"><a class="page-link" href="{{ path("app_shop",{'page':i,'nbre':nbre}) }}">{{ i }}</a></li>
						{% endfor %}
						{% if page != nbPages  %}
							<li class="page-item"><a class="page-link" href="{{ path("app_shop",{'page':page+1,'nbre':nbre}) }}">Next</a></li>
						{% else  %}
							<li class="page-item"><a class="page-link" href="{{ path("app_shop",{'page':page,'nbre':nbre}) }}">Next</a></li>
						{% endif %}
					</ul>
				</nav>
			</div>

		{% endif %}
	</div>
{% endblock %}